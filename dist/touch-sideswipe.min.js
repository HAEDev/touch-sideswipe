(function(t,e){"use strict";"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.TouchSideSwipe=e()})(this,function(){var t=function(t){"use strict";function e(){M=!0,v=document.getElementById(W.elInitID),w=document.createElement("div"),x=document.createElement("div"),b=document.createElement("div"),b.innerHTML='<div class="tss-label_pic"></div>',S=document.createElement("div"),w.appendChild(x),x.appendChild(b),v.parentNode.insertBefore(w,v),x.appendChild(v),document.body.insertBefore(S,document.body.lastChild),w.classList="tss",x.classList="tss-wrap",b.classList="tss-label",S.classList="tss-bg",g=E>499?W.elSubmainWidth:E*W.elSubmainMaxWidth,x.style.width=g+"px",L=g+W.sideHookWidth,w.style.transitionDuration=W.moveSpeed+"s",S.style.transitionDuration=W.moveSpeed+"s",l()}function i(){y===!0&&l(),E=window.innerWidth,g=E>499?W.elSubmainWidth:E*W.elSubmainMaxWidth,L=g+W.sideHookWidth,x.style.width=g+"px",w.style.transform="translateX("+-g+"px)",w.style.width=L+"px"}function n(t){document.body.style.overflow="hidden",w.style.transitionDuration="0s",S.style.transitionDuration="0s",S.style.zIndex=999,f=w.getBoundingClientRect().left,p=t.changedTouches[0].clientX}function s(t){m=t.changedTouches[0].clientX;var e=m-(p-f);if(e<=0){p>g&&(e+=p-g),m<=g&&(w.style.transform="translateX("+e+"px)");var i=m/g;i>0&&i<1&&(i>=W.opacityBackground?S.style.opacity=W.opacityBackground:S.style.opacity=i)}}function o(t){var e=t.changedTouches[0].clientX;document.body.style.overflow="",w.style.transitionDuration=W.moveSpeed+"s",S.style.transitionDuration=W.moveSpeed+"s",!y&&e>p?Math.abs(p-e)>W.shiftForStart?r():l():y&&e<p&&e<=g&&(p>g&&e<g-W.shiftForStart||p<g&&Math.abs(p-e)>W.shiftForStart?l():r())}function d(t){t.stopPropagation(),y===!1?r():l()}function a(t){t.stopPropagation();var e=w.getBoundingClientRect().left;t.clientX>e+g&&l()}function r(){S.style.opacity=W.opacityBackground,w.style.width=E+"px",w.style.transform="translateX(0px)",w.classList.remove("tss--close"),w.classList.add("tss--open"),S.classList.remove("tss-bg--close"),S.classList.add("tss-bg--open"),S.style.zIndex="999",y=!0}function l(){document.body.style.overflow="",S.style.opacity=0,w.style.width=L+"px",w.style.transform="translateX("+-g+"px)",w.classList.remove("tss--open"),w.classList.add("tss--close"),S.classList.remove("tss-bg--open"),S.classList.add("tss-bg--close"),S.style.zIndex="-999",y=!1}function c(){void 0!=(w&&S)&&(w.parentNode.insertBefore(v,w),w.remove(),S.remove(),M=!1)}function u(t){E=window.innerWidth,E<W.windowMaxWidth&&!M?h():E>=W.windowMaxWidth&&M&&c()}function h(){E<W.windowMaxWidth&&!M&&(e(),window.addEventListener("resize",i,!1),w.addEventListener("touchstart",n,!1),w.addEventListener("touchmove",s,!1),w.addEventListener("touchend",o,!1),w.addEventListener("click",a,!1),b.addEventListener("click",d,!1)),window.addEventListener("resize",u,!1)}var p,m,y,f,v,w,x,b,S,g,L,W={elInitID:t.elementID||"touchSideSwipe",elSubmainWidth:t.elementWidth||400,elSubmainMaxWidth:t.elementMaxWidth||.8,sideHookWidth:t.sideHookWidth||44,moveSpeed:t.moveSpeed||.2,opacityBackground:t.opacityBackground||.8,shiftForStart:t.shiftForStart||50,windowMaxWidth:t.windowMaxWidth||1024},E=window.innerWidth,M=!1;return h(),{tssOpen:r,tssClose:l}};return t});